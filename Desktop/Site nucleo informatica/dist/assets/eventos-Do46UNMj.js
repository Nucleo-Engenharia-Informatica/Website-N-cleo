import"./styles-r7L9TO3C.js";import{e as y}from"./events-Db4jYlMF.js";const E=document.querySelector(".menu-toggle"),C=document.querySelector(".site-nav");E.addEventListener("click",()=>{const e=C.classList.toggle("open");E.setAttribute("aria-expanded",e?"true":"false")});const w=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting&&n.target.classList.add("reveal")})},{threshold:.15});document.querySelectorAll(".reveal-on-scroll").forEach(e=>w.observe(e));function v(e){return[...e].sort((n,o)=>new Date(n.date)-new Date(o.date))}function x(e){return e?new Date(e).toLocaleDateString("pt-PT",{day:"2-digit",month:"short",year:"numeric"}):"Sem data anunciada"}function b(e){const n=new Date;return!e.date||e.status==="no_date"?"Sem data anunciada":new Date(e.date)>n?`Brevemente · ${e.location}`:`${x(e.date)} · ${e.location}`}function N(e,n){const o=document.getElementById("eventos-lista");o.innerHTML="",v(e.filter(a=>a.id!==n)).forEach(a=>{const r=document.createElement("article");r.className="news-card reveal-on-scroll";const p=document.createElement("img");p.className="news-cover",p.src=a.cover,p.alt=a.title,p.loading="lazy";const i=document.createElement("div");i.className="news-body";const c=document.createElement("h3");c.className="news-title",c.textContent=a.title;const s=document.createElement("div");s.className="news-meta",s.textContent=`${x(a.date)} · ${a.location}`;const t=document.createElement("p");t.textContent=a.desc;const h=document.createElement("div");h.className="news-actions";const m=document.createElement("a");m.href=`?id=${a.id}`,m.className="btn small",m.textContent="Ver detalhes",h.appendChild(m),i.appendChild(c),i.appendChild(s),i.appendChild(t),i.appendChild(h),r.appendChild(p),r.appendChild(i),o.appendChild(r),w.observe(r)})}function L(e){const n=document.getElementById("evento-detalhe");if(n.innerHTML="",!e)return;const o=document.createElement("div");o.className="card";const a=document.createElement("div");a.className="news-body";const r=document.createElement("h2");r.className="section-title",r.textContent=e.title;const p=document.createElement("div");p.className="news-meta",p.textContent=b(e);const i=[e.cover,...Array.isArray(e.images)?e.images:[]].filter((l,u,d)=>d.indexOf(l)===u),c=document.createElement("img");c.className="event-main",c.src=i[0],c.alt=e.title,c.loading="lazy",c.onerror=()=>{const l=c.src;l.endsWith(".jpg")?c.src=l.replace(".jpg",".jpeg"):l.endsWith(".jpeg")?c.src=l.replace(".jpeg",".png"):l.endsWith(".png")&&(c.src=l.replace(".png",".jpg"))},o.appendChild(c);const s=document.createElement("div");s.className="event-thumbs",i.forEach((l,u)=>{const d=document.createElement("img");d.src=l,d.alt=e.title,d.loading="lazy",d.onerror=()=>{const g=d.src;g.endsWith(".jpg")?d.src=g.replace(".jpg",".jpeg"):g.endsWith(".jpeg")?d.src=g.replace(".jpeg",".png"):g.endsWith(".png")&&(d.src=g.replace(".png",".jpg"))},u===0&&d.classList.add("active"),d.addEventListener("click",()=>{c.src=l,Array.from(s.children).forEach(g=>g.classList.remove("active")),d.classList.add("active")}),s.appendChild(d)});const t=document.createElement("div");t.className="lightbox";const h=document.createElement("img");t.appendChild(h),document.body.appendChild(t),c.addEventListener("click",()=>{h.src=c.src,t.classList.add("open")}),t.addEventListener("click",()=>t.classList.remove("open")),a.appendChild(r),a.appendChild(p),a.appendChild(s),(e.desc||"").split(/\n\n+/).forEach(l=>{const u=document.createElement("p");u.textContent=l,a.appendChild(u)});const m=document.createElement("div");m.className="news-actions";const f=document.createElement("a");f.href="./index.html#noticias",f.className="btn small",f.textContent="Voltar às notícias",m.appendChild(f),a.appendChild(m),o.appendChild(a),n.appendChild(o)}function j(){return new URLSearchParams(window.location.search).get("id")}function M(){const e=j(),n=y.find(o=>o.id===e);L(n),N(y,e)}M();function I(){const e=document.getElementById("bg-canvas");if(!e)return;const n=e.getContext("2d"),o=Math.max(1,window.devicePixelRatio||1);let a,r;function p(){a=window.innerWidth,r=window.innerHeight,e.width=a*o,e.height=r*o,n.setTransform(o,0,0,o,0,0)}p(),window.addEventListener("resize",p);const i=Array.from({length:90},()=>({x:Math.random()*a,y:Math.random()*r,vx:(Math.random()-.5)*.8,vy:(Math.random()-.5)*.8,r:3+Math.random()*2,hue:180+Math.random()*180}));function c(){n.clearRect(0,0,a,r);for(let s=0;s<i.length;s++){const t=i[s];t.x+=t.vx,t.y+=t.vy,(t.x<-50||t.x>a+50)&&(t.vx*=-1),(t.y<-50||t.y>r+50)&&(t.vy*=-1),n.beginPath(),n.fillStyle=`hsla(${t.hue}, 90%, 65%, 0.95)`,n.arc(t.x,t.y,t.r,0,Math.PI*2),n.fill()}for(let s=0;s<i.length;s++)for(let t=s+1;t<i.length;t++){const h=i[s],m=i[t],f=h.x-m.x,l=h.y-m.y,u=Math.hypot(f,l);if(u<140){const d=.1+(140-u)/140*.2;n.strokeStyle=`rgba(255,255,255,${d})`,n.beginPath(),n.moveTo(h.x,h.y),n.lineTo(m.x,m.y),n.stroke()}}requestAnimationFrame(c)}c()}I();
