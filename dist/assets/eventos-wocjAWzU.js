import"./styles-D0Ta5eaf.js";import{e as y}from"./events-Cp36FzaG.js";const E=document.querySelector(".menu-toggle"),x=document.querySelector(".site-nav");E.addEventListener("click",()=>{const e=x.classList.toggle("open");E.setAttribute("aria-expanded",e?"true":"false")});const w=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&a.target.classList.add("reveal")})},{threshold:.15});document.querySelectorAll(".reveal-on-scroll").forEach(e=>w.observe(e));function C(e){return[...e].sort((a,d)=>new Date(a.date)-new Date(d.date))}function b(e){return e?new Date(e).toLocaleDateString("pt-PT",{day:"2-digit",month:"short",year:"numeric"}):"Sem data anunciada"}function v(e){const a=new Date;return!e.date||e.status==="no_date"?"Sem data anunciada":new Date(e.date)>a?`Brevemente · ${e.location}`:`${b(e.date)} · ${e.location}`}function j(e,a){const d=document.getElementById("eventos-lista");d.innerHTML="",C(e.filter(s=>s.id!==a)).forEach(s=>{const p=document.createElement("article");p.className="news-card reveal-on-scroll";const r=document.createElement("img");r.className="news-cover",r.src=s.cover,r.alt=s.title,r.loading="lazy";const c=[],t=s.cover||"";t&&(t.startsWith("/images/")&&c.push(t.replace("/images/","images/")),t.endsWith(".jpg")&&(c.push(t.replace(".jpg",".jpeg")),c.push(t.replace(".jpg",".png"))),t.endsWith(".jpeg")&&(c.push(t.replace(".jpeg",".png")),c.push(t.replace(".jpeg",".jpg"))),t.endsWith(".png")&&(c.push(t.replace(".png",".jpg")),c.push(t.replace(".png",".jpeg")))),(Array.isArray(s.images)?s.images:[]).forEach(l=>{c.push(l),l.startsWith("/images/")&&c.push(l.replace("/images/","images/"))}),r.dataset.fbi="0",r.onerror=()=>{const l=Number(r.dataset.fbi);l<c.length?(r.src=c[l],r.dataset.fbi=String(l+1)):r.onerror=null};const o=document.createElement("div");o.className="news-body";const n=document.createElement("h3");n.className="news-title",n.textContent=s.title;const h=document.createElement("div");h.className="news-meta",h.textContent=`${b(s.date)} · ${s.location}`;const g=document.createElement("p");g.textContent=s.desc;const u=document.createElement("div");u.className="news-actions";const i=document.createElement("a");i.href=`?id=${s.id}`,i.className="btn small",i.textContent="Ver detalhes",u.appendChild(i),o.appendChild(n),o.appendChild(h),o.appendChild(g),o.appendChild(u),p.appendChild(r),p.appendChild(o),d.appendChild(p),w.observe(p)})}function N(e){const a=document.getElementById("evento-detalhe");if(a.innerHTML="",!e)return;const d=document.createElement("div");d.className="card";const s=document.createElement("div");s.className="news-body";const p=document.createElement("h2");p.className="section-title",p.textContent=e.title;const r=document.createElement("div");r.className="news-meta",r.textContent=v(e);const c=[e.cover,...Array.isArray(e.images)?e.images:[]].filter((i,l,m)=>m.indexOf(i)===l),t=document.createElement("img");t.className="event-main",t.src=c[0],t.alt=e.title,t.loading="lazy",t.onerror=()=>{const i=t.src;i.endsWith(".jpg")?t.src=i.replace(".jpg",".jpeg"):i.endsWith(".jpeg")?t.src=i.replace(".jpeg",".png"):i.endsWith(".png")&&(t.src=i.replace(".png",".jpg"))},d.appendChild(t);const o=document.createElement("div");o.className="event-thumbs",c.forEach((i,l)=>{const m=document.createElement("img");m.src=i,m.alt=e.title,m.loading="lazy",m.onerror=()=>{const f=m.src;f.endsWith(".jpg")?m.src=f.replace(".jpg",".jpeg"):f.endsWith(".jpeg")?m.src=f.replace(".jpeg",".png"):f.endsWith(".png")&&(m.src=f.replace(".png",".jpg"))},l===0&&m.classList.add("active"),m.addEventListener("click",()=>{t.src=i,Array.from(o.children).forEach(f=>f.classList.remove("active")),m.classList.add("active")}),o.appendChild(m)});const n=document.createElement("div");n.className="lightbox";const h=document.createElement("img");n.appendChild(h),document.body.appendChild(n),t.addEventListener("click",()=>{h.src=t.src,n.classList.add("open")}),n.addEventListener("click",()=>n.classList.remove("open")),s.appendChild(p),s.appendChild(r),s.appendChild(o),(e.desc||"").split(/\n\n+/).forEach(i=>{const l=document.createElement("p");l.textContent=i,s.appendChild(l)});const g=document.createElement("div");g.className="news-actions";const u=document.createElement("a");u.href="./index.html#noticias",u.className="btn small",u.textContent="Voltar às notícias",g.appendChild(u),s.appendChild(g),d.appendChild(s),a.appendChild(d)}function L(){return new URLSearchParams(window.location.search).get("id")}function M(){const e=L(),a=y.find(d=>d.id===e);N(a),j(y,e)}M();function W(){const e=document.getElementById("bg-canvas");if(!e)return;const a=e.getContext("2d"),d=Math.max(1,window.devicePixelRatio||1);let s,p;function r(){s=window.innerWidth,p=window.innerHeight,e.width=s*d,e.height=p*d,a.setTransform(d,0,0,d,0,0)}r(),window.addEventListener("resize",r);const c=Array.from({length:90},()=>({x:Math.random()*s,y:Math.random()*p,vx:(Math.random()-.5)*.8,vy:(Math.random()-.5)*.8,r:3+Math.random()*2,hue:180+Math.random()*180}));function t(){a.clearRect(0,0,s,p);for(let o=0;o<c.length;o++){const n=c[o];n.x+=n.vx,n.y+=n.vy,(n.x<-50||n.x>s+50)&&(n.vx*=-1),(n.y<-50||n.y>p+50)&&(n.vy*=-1),a.beginPath(),a.fillStyle=`hsla(${n.hue}, 90%, 65%, 0.95)`,a.arc(n.x,n.y,n.r,0,Math.PI*2),a.fill()}for(let o=0;o<c.length;o++)for(let n=o+1;n<c.length;n++){const h=c[o],g=c[n],u=h.x-g.x,i=h.y-g.y,l=Math.hypot(u,i);if(l<140){const m=.1+(140-l)/140*.2;a.strokeStyle=`rgba(255,255,255,${m})`,a.beginPath(),a.moveTo(h.x,h.y),a.lineTo(g.x,g.y),a.stroke()}}requestAnimationFrame(t)}t()}W();
